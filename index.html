<!DOCTYPE html>
<!-- Author: Martin ABADIE martin-abadie.fr -->
<html>

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <title>PiThermalMonitoring</title>
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
    <style>
        .temperature {
            font-family: Verdana, Geneva, sans-serif;
            text-align: center;
            margin-top: 50vh;
            transform: translateY(-50%);
        }
    </style>
</head>
<body>
    <div class="temperature"></div>
    <button click="sendQuery();">Tester</button>
    
    <script type="text/javascript">

        let socket;

        $('document').ready(function() {
            socket = io.connect("http://node.thermal.martin-abadie.fr");
            if(socket) {
                console.log('Connected!');

                /*
                window.setInterval(function() {
                    console.log('Querying...');
                    socket.emit('message', 'temp?');
                }, 200);
                */

                socket.on('message', function(message) {
                    console.log(message);
                    $('.temperature').html(message + 'Â°C');
                });
            } else {
                console.log('Connection failed');
            }
        });

        function sendQuery() {
            socket.emit('message', 'temp?');
            console.log('Query sent');
        }
    </script>
</body>
</html>